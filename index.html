<!DOCTYPE html>
<html>
<head>
	<title>Exo call api</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
</head>
<style type="text/css">
	.init{
		width:70%;
		margin: 0 auto;
		padding: 42px;
	}
	.ttl{
		text-align: center;
    	margin-bottom: 27px;
    	font-size: 14px;
    	font-weight: bold;
    	color: red;
	}

</style>
<body>
	<div class="init">
	<div class = "ttl">Exercise call api with promise</div>
	<table class="table table-success table-striped" id ="main" style="text-align: center;">
		<thead>
			<tr>
				<th>ID</th>
				<th>UserID</th>
				<th>Title</th>
				<th>Statut</th>				
			</tr>
		</thead>		
	</table>
	<div>
		<select id="choix">
			<option value="0">Filter Statut</option>
			<option value="1">Not completed</option>
			<option value="2">Completed</option>
		</select>
	</div>
	</div>
	<script type="text/javascript">
		let html = ""
		let element = document.createElement("tbody")
		element.setAttribute("id","body")
		const URL = "https://jsonplaceholder.typicode.com/todos"
		const promise = new Promise((resolve,reject) =>{
			resolve(fetch(URL))
		})
		promise.then(response => response.json())
		.then(function(json){
			console.log(json)
			const selt = document.getElementById("choix")
			json.forEach(function(data,index){
				if (index < 11){
					html += "<tr><td>"+data.id+"</td><td>"+data.userId+"</td><td>"+data.title+"</td><td>"+data.completed+"</td></tr>"
				}
			})
			element.innerHTML = html
			document.getElementById("main").appendChild(element)
			selt.addEventListener("change",function(e){
				
			})
		})
	</script>
</body>
</html>